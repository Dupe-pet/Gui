local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local backpack = player:WaitForChild("Backpack")

-- GUI Setup
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "DupeGUI"
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 220, 0, 130)
mainFrame.Position = UDim2.new(0.4, 0, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)
Instance.new("UIStroke", mainFrame).Color = Color3.new(1, 1, 1)

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "Dupe panel"
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.BackgroundTransparency = 1

local toolLabel = Instance.new("TextLabel", mainFrame)
toolLabel.Position = UDim2.new(0, 10, 0, 35)
toolLabel.Size = UDim2.new(1, -20, 0, 20)
toolLabel.TextColor3 = Color3.new(1, 1, 1)
toolLabel.Font = Enum.Font.Gotham
toolLabel.TextSize = 14
toolLabel.BackgroundTransparency = 1
toolLabel.Text = "Current Tool: None"

local dupeButton = Instance.new("TextButton", mainFrame)
dupeButton.Position = UDim2.new(0.5, -50, 0, 70)
dupeButton.Size = UDim2.new(0, 100, 0, 30)
dupeButton.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
dupeButton.Text = "Dupe"
dupeButton.TextColor3 = Color3.new(1, 1, 1)
dupeButton.Font = Enum.Font.GothamBold
dupeButton.TextSize = 14
Instance.new("UICorner", dupeButton).CornerRadius = UDim.new(0, 8)

-- Helper: get currently equipped tool
local function getHeldTool()
	local character = player.Character
	if character then
		for _, item in ipairs(character:GetChildren()) do
			if item:IsA("Tool") then
				return item
			end
		end
	end
	return nil
end

-- Update tool label continuously
game:GetService("RunService").RenderStepped:Connect(function()
	local tool = getHeldTool()
	toolLabel.Text = tool and ("Current Tool: " .. tool.Name) or "Current Tool: None"
end)

-- Fake dupe into backpack
dupeButton.MouseButton1Click:Connect(function()
	local tool = getHeldTool()
	if tool then
		local fakeClone = tool:Clone()
		fakeClone.Name = "" .. tool.Name
		fakeClone.Parent = backpack -- adds it to visible inventory bar (client-side only)
	end
end)
